{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _stringHash = _interopRequireDefault(require(\"string-hash\"));\n\nvar _stylesheet = _interopRequireDefault(require(\"./lib/stylesheet\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar sanitize = function sanitize(rule) {\n  return rule.replace(/\\/style/gi, '\\\\/style');\n};\n\nvar StyleSheetRegistry = /*#__PURE__*/function () {\n  function StyleSheetRegistry() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$styleSheet = _ref.styleSheet,\n        styleSheet = _ref$styleSheet === void 0 ? null : _ref$styleSheet,\n        _ref$optimizeForSpeed = _ref.optimizeForSpeed,\n        optimizeForSpeed = _ref$optimizeForSpeed === void 0 ? false : _ref$optimizeForSpeed,\n        _ref$isBrowser = _ref.isBrowser,\n        isBrowser = _ref$isBrowser === void 0 ? typeof window !== 'undefined' : _ref$isBrowser;\n\n    _classCallCheck(this, StyleSheetRegistry);\n\n    this._sheet = styleSheet || new _stylesheet.default({\n      name: 'styled-jsx',\n      optimizeForSpeed: optimizeForSpeed\n    });\n\n    this._sheet.inject();\n\n    if (styleSheet && typeof optimizeForSpeed === 'boolean') {\n      this._sheet.setOptimizeForSpeed(optimizeForSpeed);\n\n      this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n    }\n\n    this._isBrowser = isBrowser;\n    this._fromServer = undefined;\n    this._indices = {};\n    this._instancesCounts = {};\n    this.computeId = this.createComputeId();\n    this.computeSelector = this.createComputeSelector();\n  }\n\n  _createClass(StyleSheetRegistry, [{\n    key: \"add\",\n    value: function add(props) {\n      var _this = this;\n\n      if (undefined === this._optimizeForSpeed) {\n        this._optimizeForSpeed = Array.isArray(props.children);\n\n        this._sheet.setOptimizeForSpeed(this._optimizeForSpeed);\n\n        this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n      }\n\n      if (this._isBrowser && !this._fromServer) {\n        this._fromServer = this.selectFromServer();\n        this._instancesCounts = Object.keys(this._fromServer).reduce(function (acc, tagName) {\n          acc[tagName] = 0;\n          return acc;\n        }, {});\n      }\n\n      var _this$getIdAndRules = this.getIdAndRules(props),\n          styleId = _this$getIdAndRules.styleId,\n          rules = _this$getIdAndRules.rules; // Deduping: just increase the instances count.\n\n\n      if (styleId in this._instancesCounts) {\n        this._instancesCounts[styleId] += 1;\n        return;\n      }\n\n      var indices = rules.map(function (rule) {\n        return _this._sheet.insertRule(rule);\n      }) // Filter out invalid rules\n      .filter(function (index) {\n        return index !== -1;\n      });\n      this._indices[styleId] = indices;\n      this._instancesCounts[styleId] = 1;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(props) {\n      var _this2 = this;\n\n      var _this$getIdAndRules2 = this.getIdAndRules(props),\n          styleId = _this$getIdAndRules2.styleId;\n\n      invariant(styleId in this._instancesCounts, \"styleId: `\".concat(styleId, \"` not found\"));\n      this._instancesCounts[styleId] -= 1;\n\n      if (this._instancesCounts[styleId] < 1) {\n        var tagFromServer = this._fromServer && this._fromServer[styleId];\n\n        if (tagFromServer) {\n          tagFromServer.parentNode.removeChild(tagFromServer);\n          delete this._fromServer[styleId];\n        } else {\n          this._indices[styleId].forEach(function (index) {\n            return _this2._sheet.deleteRule(index);\n          });\n\n          delete this._indices[styleId];\n        }\n\n        delete this._instancesCounts[styleId];\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(props, nextProps) {\n      this.add(nextProps);\n      this.remove(props);\n    }\n  }, {\n    key: \"flush\",\n    value: function flush() {\n      this._sheet.flush();\n\n      this._sheet.inject();\n\n      this._fromServer = undefined;\n      this._indices = {};\n      this._instancesCounts = {};\n      this.computeId = this.createComputeId();\n      this.computeSelector = this.createComputeSelector();\n    }\n  }, {\n    key: \"cssRules\",\n    value: function cssRules() {\n      var _this3 = this;\n\n      var fromServer = this._fromServer ? Object.keys(this._fromServer).map(function (styleId) {\n        return [styleId, _this3._fromServer[styleId]];\n      }) : [];\n\n      var cssRules = this._sheet.cssRules();\n\n      return fromServer.concat(Object.keys(this._indices).map(function (styleId) {\n        return [styleId, _this3._indices[styleId].map(function (index) {\n          return cssRules[index].cssText;\n        }).join(_this3._optimizeForSpeed ? '' : '\\n')];\n      }) // filter out empty rules\n      .filter(function (rule) {\n        return Boolean(rule[1]);\n      }));\n    }\n    /**\n     * createComputeId\n     *\n     * Creates a function to compute and memoize a jsx id from a basedId and optionally props.\n     */\n\n  }, {\n    key: \"createComputeId\",\n    value: function createComputeId() {\n      var cache = {};\n      return function (baseId, props) {\n        if (!props) {\n          return \"jsx-\".concat(baseId);\n        }\n\n        var propsToString = String(props);\n        var key = baseId + propsToString; // return `jsx-${hashString(`${baseId}-${propsToString}`)}`\n\n        if (!cache[key]) {\n          cache[key] = \"jsx-\".concat((0, _stringHash.default)(\"\".concat(baseId, \"-\").concat(propsToString)));\n        }\n\n        return cache[key];\n      };\n    }\n    /**\n     * createComputeSelector\n     *\n     * Creates a function to compute and memoize dynamic selectors.\n     */\n\n  }, {\n    key: \"createComputeSelector\",\n    value: function createComputeSelector() {\n      var selectoPlaceholderRegexp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : /__jsx-style-dynamic-selector/g;\n      var cache = {};\n      return function (id, css) {\n        // Sanitize SSR-ed CSS.\n        // Client side code doesn't need to be sanitized since we use\n        // document.createTextNode (dev) and the CSSOM api sheet.insertRule (prod).\n        if (!this._isBrowser) {\n          css = sanitize(css);\n        }\n\n        var idcss = id + css;\n\n        if (!cache[idcss]) {\n          cache[idcss] = css.replace(selectoPlaceholderRegexp, id);\n        }\n\n        return cache[idcss];\n      };\n    }\n  }, {\n    key: \"getIdAndRules\",\n    value: function getIdAndRules(props) {\n      var _this4 = this;\n\n      var css = props.children,\n          dynamic = props.dynamic,\n          id = props.id;\n\n      if (dynamic) {\n        var styleId = this.computeId(id, dynamic);\n        return {\n          styleId: styleId,\n          rules: Array.isArray(css) ? css.map(function (rule) {\n            return _this4.computeSelector(styleId, rule);\n          }) : [this.computeSelector(styleId, css)]\n        };\n      }\n\n      return {\n        styleId: this.computeId(id),\n        rules: Array.isArray(css) ? css : [css]\n      };\n    }\n    /**\n     * selectFromServer\n     *\n     * Collects style tags from the document with id __jsx-XXX\n     */\n\n  }, {\n    key: \"selectFromServer\",\n    value: function selectFromServer() {\n      var elements = Array.prototype.slice.call(document.querySelectorAll('[id^=\"__jsx-\"]'));\n      return elements.reduce(function (acc, element) {\n        var id = element.id.slice(2);\n        acc[id] = element;\n        return acc;\n      }, {});\n    }\n  }]);\n\n  return StyleSheetRegistry;\n}();\n\nexports.default = StyleSheetRegistry;\n\nfunction invariant(condition, message) {\n  if (!condition) {\n    throw new Error(\"StyleSheetRegistry: \".concat(message, \".\"));\n  }\n}","map":{"version":3,"sources":["C:/Users/Evyat/OneDrive/שולחן העבודה/financy-assignment/node_modules/styled-jsx/dist/stylesheet-registry.js"],"names":["Object","defineProperty","exports","value","default","_stringHash","_interopRequireDefault","require","_stylesheet","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","sanitize","rule","replace","StyleSheetRegistry","_ref","arguments","undefined","_ref$styleSheet","styleSheet","_ref$optimizeForSpeed","optimizeForSpeed","_ref$isBrowser","isBrowser","window","_sheet","name","inject","setOptimizeForSpeed","_optimizeForSpeed","isOptimizeForSpeed","_isBrowser","_fromServer","_indices","_instancesCounts","computeId","createComputeId","computeSelector","createComputeSelector","add","_this","Array","isArray","children","selectFromServer","keys","reduce","acc","tagName","_this$getIdAndRules","getIdAndRules","styleId","rules","indices","map","insertRule","filter","index","remove","_this2","_this$getIdAndRules2","invariant","concat","tagFromServer","parentNode","removeChild","forEach","deleteRule","update","nextProps","flush","cssRules","_this3","fromServer","cssText","join","Boolean","cache","baseId","propsToString","String","selectoPlaceholderRegexp","id","css","idcss","_this4","dynamic","elements","slice","call","document","querySelectorAll","element","condition","message","Error"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _stringHash = _interopRequireDefault(require(\"string-hash\"));\n\nvar _stylesheet = _interopRequireDefault(require(\"./lib/stylesheet\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar sanitize = function sanitize(rule) {\n  return rule.replace(/\\/style/gi, '\\\\/style');\n};\n\nvar StyleSheetRegistry =\n/*#__PURE__*/\nfunction () {\n  function StyleSheetRegistry() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$styleSheet = _ref.styleSheet,\n        styleSheet = _ref$styleSheet === void 0 ? null : _ref$styleSheet,\n        _ref$optimizeForSpeed = _ref.optimizeForSpeed,\n        optimizeForSpeed = _ref$optimizeForSpeed === void 0 ? false : _ref$optimizeForSpeed,\n        _ref$isBrowser = _ref.isBrowser,\n        isBrowser = _ref$isBrowser === void 0 ? typeof window !== 'undefined' : _ref$isBrowser;\n\n    _classCallCheck(this, StyleSheetRegistry);\n\n    this._sheet = styleSheet || new _stylesheet.default({\n      name: 'styled-jsx',\n      optimizeForSpeed: optimizeForSpeed\n    });\n\n    this._sheet.inject();\n\n    if (styleSheet && typeof optimizeForSpeed === 'boolean') {\n      this._sheet.setOptimizeForSpeed(optimizeForSpeed);\n\n      this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n    }\n\n    this._isBrowser = isBrowser;\n    this._fromServer = undefined;\n    this._indices = {};\n    this._instancesCounts = {};\n    this.computeId = this.createComputeId();\n    this.computeSelector = this.createComputeSelector();\n  }\n\n  _createClass(StyleSheetRegistry, [{\n    key: \"add\",\n    value: function add(props) {\n      var _this = this;\n\n      if (undefined === this._optimizeForSpeed) {\n        this._optimizeForSpeed = Array.isArray(props.children);\n\n        this._sheet.setOptimizeForSpeed(this._optimizeForSpeed);\n\n        this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n      }\n\n      if (this._isBrowser && !this._fromServer) {\n        this._fromServer = this.selectFromServer();\n        this._instancesCounts = Object.keys(this._fromServer).reduce(function (acc, tagName) {\n          acc[tagName] = 0;\n          return acc;\n        }, {});\n      }\n\n      var _this$getIdAndRules = this.getIdAndRules(props),\n          styleId = _this$getIdAndRules.styleId,\n          rules = _this$getIdAndRules.rules; // Deduping: just increase the instances count.\n\n\n      if (styleId in this._instancesCounts) {\n        this._instancesCounts[styleId] += 1;\n        return;\n      }\n\n      var indices = rules.map(function (rule) {\n        return _this._sheet.insertRule(rule);\n      }) // Filter out invalid rules\n      .filter(function (index) {\n        return index !== -1;\n      });\n      this._indices[styleId] = indices;\n      this._instancesCounts[styleId] = 1;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(props) {\n      var _this2 = this;\n\n      var _this$getIdAndRules2 = this.getIdAndRules(props),\n          styleId = _this$getIdAndRules2.styleId;\n\n      invariant(styleId in this._instancesCounts, \"styleId: `\".concat(styleId, \"` not found\"));\n      this._instancesCounts[styleId] -= 1;\n\n      if (this._instancesCounts[styleId] < 1) {\n        var tagFromServer = this._fromServer && this._fromServer[styleId];\n\n        if (tagFromServer) {\n          tagFromServer.parentNode.removeChild(tagFromServer);\n          delete this._fromServer[styleId];\n        } else {\n          this._indices[styleId].forEach(function (index) {\n            return _this2._sheet.deleteRule(index);\n          });\n\n          delete this._indices[styleId];\n        }\n\n        delete this._instancesCounts[styleId];\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(props, nextProps) {\n      this.add(nextProps);\n      this.remove(props);\n    }\n  }, {\n    key: \"flush\",\n    value: function flush() {\n      this._sheet.flush();\n\n      this._sheet.inject();\n\n      this._fromServer = undefined;\n      this._indices = {};\n      this._instancesCounts = {};\n      this.computeId = this.createComputeId();\n      this.computeSelector = this.createComputeSelector();\n    }\n  }, {\n    key: \"cssRules\",\n    value: function cssRules() {\n      var _this3 = this;\n\n      var fromServer = this._fromServer ? Object.keys(this._fromServer).map(function (styleId) {\n        return [styleId, _this3._fromServer[styleId]];\n      }) : [];\n\n      var cssRules = this._sheet.cssRules();\n\n      return fromServer.concat(Object.keys(this._indices).map(function (styleId) {\n        return [styleId, _this3._indices[styleId].map(function (index) {\n          return cssRules[index].cssText;\n        }).join(_this3._optimizeForSpeed ? '' : '\\n')];\n      }) // filter out empty rules\n      .filter(function (rule) {\n        return Boolean(rule[1]);\n      }));\n    }\n    /**\n     * createComputeId\n     *\n     * Creates a function to compute and memoize a jsx id from a basedId and optionally props.\n     */\n\n  }, {\n    key: \"createComputeId\",\n    value: function createComputeId() {\n      var cache = {};\n      return function (baseId, props) {\n        if (!props) {\n          return \"jsx-\".concat(baseId);\n        }\n\n        var propsToString = String(props);\n        var key = baseId + propsToString; // return `jsx-${hashString(`${baseId}-${propsToString}`)}`\n\n        if (!cache[key]) {\n          cache[key] = \"jsx-\".concat((0, _stringHash.default)(\"\".concat(baseId, \"-\").concat(propsToString)));\n        }\n\n        return cache[key];\n      };\n    }\n    /**\n     * createComputeSelector\n     *\n     * Creates a function to compute and memoize dynamic selectors.\n     */\n\n  }, {\n    key: \"createComputeSelector\",\n    value: function createComputeSelector() {\n      var selectoPlaceholderRegexp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : /__jsx-style-dynamic-selector/g;\n      var cache = {};\n      return function (id, css) {\n        // Sanitize SSR-ed CSS.\n        // Client side code doesn't need to be sanitized since we use\n        // document.createTextNode (dev) and the CSSOM api sheet.insertRule (prod).\n        if (!this._isBrowser) {\n          css = sanitize(css);\n        }\n\n        var idcss = id + css;\n\n        if (!cache[idcss]) {\n          cache[idcss] = css.replace(selectoPlaceholderRegexp, id);\n        }\n\n        return cache[idcss];\n      };\n    }\n  }, {\n    key: \"getIdAndRules\",\n    value: function getIdAndRules(props) {\n      var _this4 = this;\n\n      var css = props.children,\n          dynamic = props.dynamic,\n          id = props.id;\n\n      if (dynamic) {\n        var styleId = this.computeId(id, dynamic);\n        return {\n          styleId: styleId,\n          rules: Array.isArray(css) ? css.map(function (rule) {\n            return _this4.computeSelector(styleId, rule);\n          }) : [this.computeSelector(styleId, css)]\n        };\n      }\n\n      return {\n        styleId: this.computeId(id),\n        rules: Array.isArray(css) ? css : [css]\n      };\n    }\n    /**\n     * selectFromServer\n     *\n     * Collects style tags from the document with id __jsx-XXX\n     */\n\n  }, {\n    key: \"selectFromServer\",\n    value: function selectFromServer() {\n      var elements = Array.prototype.slice.call(document.querySelectorAll('[id^=\"__jsx-\"]'));\n      return elements.reduce(function (acc, element) {\n        var id = element.id.slice(2);\n        acc[id] = element;\n        return acc;\n      }, {});\n    }\n  }]);\n\n  return StyleSheetRegistry;\n}();\n\nexports.default = StyleSheetRegistry;\n\nfunction invariant(condition, message) {\n  if (!condition) {\n    throw new Error(\"StyleSheetRegistry: \".concat(message, \".\"));\n  }\n}"]},"metadata":{},"sourceType":"script"}